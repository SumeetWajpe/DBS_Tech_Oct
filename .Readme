# CodeSgare URL

https://codeshare.io/a3ZxVB

# Github Repo (Training demos)
https://github.com/SumeetWajpe/DBS_Tech_Oct

# MongoDB Commands

# Show all databases

show dbs

# Insert one record (document)

db.courses.insertOne({title:"React",price:8000,days:5})

# Insert many (documents)

db.courses.insertMany([{title:"React",price:8000,days:5},{title:"Redux",price:8000,days:5}])

# using mongoimport (Local - On Prem)

mongoimport --db coursesdb --collection courses --jsonArray --file /Users/achilles/Documents/Trainings/2025/DBSTech_MongoDB_Oct_25/DBS_Tech_Oct/DAY1/courses.json

# using mongoimport (Cloud - Atlas)

    mongoimport --uri="mongodb+srv://<username>:<password>@<cluster-url>/<database>?retryWrites=true&w=majority" --db myDatabase --collection myCollection --file myData.json --jsonArray

# Projection - \_id will not be dispoayed and only title will be displayed

db.courses.find({},{"\_id":0,"title":1})

# Embedded document

db.courses.updateMany(
{},
{
$set: {
venue: {
floor: "16",
building:"Skyview",
},
},
}
)

db.courses.updateMany({}
,
{
$set: {
venue:{
floor: "16",
building:"Skyview",
trainingRoom:"Canopy"
}
},
}
)

# Projection of Embedded documents

db.courses.find({},{title:1, venue: {trainingRoom:1} })
db.courses.find({},{title:1, "venue.trainingRoom" : 1})



# Find users having (dob)age greater than 30 or nat CA -> 
db.users.find({ $or: [{ "dob.age": { $gt: 30 } }, { "nat": "CA" }] }).limit(2)

# sorting - -1 for descending , 1 for acsending
db.users.find({ $or: [{ "dob.age": { $gt: 30 } }, { "nat": "CA" }] }).sort({"dob.age":-1}).limit(3)

# Aggregation pipeline
match -> group 
db.users.aggregate([{$match : { "gender":"male"}},{$group:{_id : {nat: "$nat"},"userscount": {$sum:1}}}])

// To find users with age > 50 by gender
// find avg ($avg) age & number of users corresponding to that group (avg age) and sort userscount to be descending

db.users.aggregate([{$match : {"dob.age": {$gt:50} }},{$group:{_id : {gender : "$gender" } , avgAge : {$avg: "$dob.age" } ,"userscount": {$sum:1}}},{$sort:{userscount:-1}}])